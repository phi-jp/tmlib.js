<!DOCTYPE html>

<html>
    
    <head>
        <meta charset="UTF-8" />
        <title>tmlib.js test</title>
        <script src="../../build/tmlib.js"></script>
        
        <script src="http://dat-gui.googlecode.com/git/build/dat.gui.js"></script>
        <script src="https://raw.github.com/mrdoob/stats.js/master/src/Stats.js"></script>
        
        <script>
            
            window.onload = function() {
                var e = tm.dom.Element("#c");
                var c = tm.graphics.Canvas(e.element);
                
                c.setLineStyle(8, "round", "round", 10);
                
                // マウス用イベント登録
                var pointX = null, pointY = null;
                
                e.event.pointstart(function(e) {
                    // 位置をセット
                    pointX = e.pointX; pointY = e.pointY;
                    e.stop();
                });
                e.event.pointmove(function(e) {
                    // null の時は描画しない
                    if (pointX === null || pointY === null) return ;
                    
                    c.drawLine(pointX, pointY, e.pointX, e.pointY);
                    pointX = e.pointX; pointY = e.pointY;
                    e.stop();
                });
                e.event.pointend(function(e) {
                    // ボタンを押していない時は null をセット
                    pointX = pointY = null;
                    e.stop();
                });
                
                // ダブルクリックで保存
                e.event.mdlclick( function() { c.saveAsImage(); } );
            };
            
            
        </script>
    </head>
    
    <body>
        <canvas id="c" width="640" height="480"></canvas>
    </body>
    
</html>