<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js">/*
 * list.js
 */

(function() {
    
<span id='tm-Item'>    /**
</span>     * @class tm.Item
     * Item クラス
     */
    tm.Item = tm.createClass({
        
        prev: null,
        next: null,
        data: null,
        
<span id='tm-Item-method-constructor'>        /**
</span>         * @constructor
         * コンストラクタ
         */
        init: function() {
<span id='tm-List'>        }
</span>    });
    
    /**
     * @class tm.List
     * List クラス
     * ### Reference
     * - &lt;http://java.sun.com/javase/ja/6/docs/ja/api/java/util/LinkedList.html&gt;
     * - &lt;http://www.javadrive.jp/start/linkedlist/&gt;
     * - &lt;http://www5c.biglobe.ne.jp/~ecb/cpp/07_08.html&gt;
     * - &lt;http://hextomino.tsukuba.ch/e30895.html&gt;
     * - &lt;http://www.nczonline.net/blog/2009/04/21/computer-science-in-javascript-doubly-linked-lists/&gt;
     * - &lt;http://www.nczonline.net/blog/2009/04/13/computer-science-in-javascript-linked-list/&gt;
     */
<span id='tm-List-method-constructor'>    tm.List = tm.createClass({
</span>        
        /**
         * @constructor
         * コンストラクタ
         */
        init: function() {
            this._length = 0;
            this._head = tm.Item();
            this._tail = tm.Item();
            
            this._head.next = this._tail;
<span id='tm-List-property-add'>            this._tail.prev = this._head;
</span>        },
        
        /**
         * @property
         * 追加
         */
        add: function(data) {
            var item = tm.Item();
            item.data = data;
            
            item.prev = this._tail.prev;
            item.next = this._tail;
            
            this._tail.prev.next = item;
            this._tail.prev = item;
            
            ++this._length;
            
<span id='tm-List-property-remove'>            return this;
</span>        },
        
        /**
         * @property
         * 削除
         */
        remove: function(index) {
            var current = this.getItem(index);
            
            current.prev.next = current.next;
            current.next.prev = current.prev;
            
            --this._length;
            
<span id='tm-List-property-get'>            return current;
</span>        },
        
        /**
         * @property
         * ゲット
         */
        get: function(index) {
<span id='tm-List-property-getItem'>            return this.getItem(index).data;
</span>        },
        
        /**
         * @property
         * アイテムを取得
         */
        getItem: function(index) {
            var current = this._head.next;
            var i=0;
            
            while (i++ &lt; index) {
                current = current.next;
            }
<span id='tm-List-property-forEach'>            
</span>            return current;
        },
        
        /**
         * @property
         * 繰り返し
         */
<span id='tm-List-property-clear'>        forEach: function(fn) {
</span>            // TODO:
        },
        
        /**
         * @property
         * クリア
<span id='tm-List-property-clone'>         */
</span>        clear: function() {
            // TODO:
        },
        
        /**
         * @property
<span id='tm-List-property-getFirst'>         * クローン
</span>         */
        clone: function() {
            // TODO:
        },
        
        /**
         * @property
<span id='tm-List-property-getLast'>         * 最初の要素を取得
</span>         */
        getFirst: function() {
            // TODO:
        },
        
        /**
         * @property
<span id='tm-List-property-indexOf'>         * 最後の要素を取得
</span>         */
        getLast: function() {
            // TODO:
        },
        
        /**
         * @property
<span id='tm-List-property-lastIndexOf'>         * 最初に一致した位置のインデックスを取得
</span>         */
        indexOf: function(obj) {
            // TODO:
        },
        
<span id='tm-List-property-toArray'>        /**
</span>         * @property
         * 最後に一致した位置のインデックスを取得
         */
        lastIndexOf: function(obj) {
            // TODO:
        },
        
        /**
         * @property
         * 配列に変換
         */
        toArray: function() {
            if (this._length &lt;= 0) return [];
            
            var current = this._head.next;
            var arr = [];
<span id='tm-List-property-toString'>            
</span>            while (current.data != null) {
                arr.push(current.data);
                current = current.next;
            }
            
            return arr;
        },
        
        /**
         * @property
         * 文字列に変換
         */
        toString: function() {
            var arr = this.toArray();
            for (var i=0,len=arr.length; i&lt;len; ++i) {
                arr[i] = arr[i].toString();
            }
            
            return arr.join(',');
        },
    });
    
})();

</pre>
</body>
</html>
